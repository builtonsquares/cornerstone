{{!--
<!--
{{#partial "page"}}
<div class="page">

    <main class="page-content" data-cart>
        {{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}

        {{> components/cart/page-title}}

        <div data-cart-status>
            {{> components/cart/status-messages}}
        </div>

        {{#if cart.items.length}}
            <div class="loadingOverlay"></div>

            <div data-cart-content>
                {{> components/cart/content}}
            </div>

            <div data-cart-totals>
                {{> components/cart/totals}}
            </div>

            {{#if cart.show_primary_checkout_button}}
                <div class="cart-actions">
                    <a class="button button&#45;&#45;primary" href="{{urls.checkout.single_address}}" title="{{lang 'cart.checkout.title'}}">{{lang 'cart.checkout.button'}}</a>
                    {{#if cart.show_multiple_address_shipping}}
                        <a class="checkoutMultiple" href="{{urls.checkout.multiple_address}}">
                            {{lang 'cart.preview.checkout_multiple'}}
                        </a>
                    {{/if}}
                </div>
            {{else}}
                <div class="cart-actions">
                    <a class="button" href="{{urls.home}}" title="{{lang 'cart.continue_shopping'}}">{{lang 'cart.continue_shopping'}}</a>
                </div>
            {{/if}}

            {{#if cart.additional_checkout_buttons}}
                <div class="cart-additionalCheckoutButtons">
                    {{#each cart.additional_checkout_buttons}}
                        {{{this}}}
                    {{/each}}
                </div>
            {{/if}}
        {{else}}
            <h3>{{lang 'cart.checkout.empty_cart'}}</h3>
        {{/if}}

        {{{snippet 'cart'}}}
    </main>
</div>
{{/partial}}
{{> layout/base}}
-->
--}}

{{#partial "page"}}
<div class="page">
    {{!--Bolt Addition--}}
    <script
        id="bolt-connect"
        type="text/javascript"
        src="https://connect.bolt.com/connect-bigcommerce.js"
        data-publishable-key="Wraq_KDgUVug.mH--y6c3exkB.f4cf1326f8511c3679f964491bc1ad268e4ff579ea29c8b603a3eeb6beed3adc"
        data-shopping-cart-id="BigCommerce">
    </script>
    {{!--Bolt Addition End--}}
    <main class="page-content" data-cart>
        {{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}

        {{> components/cart/page-title}}

        <div data-cart-status>
            {{> components/cart/status-messages}}
        </div>

        {{#if cart.items.length}}
            <div class="loadingOverlay"></div>

            <div data-cart-content>
                {{> components/cart/content}}
            </div>

            <div data-cart-totals>
                {{> components/cart/totals}}
            </div>
            {{!--Bolt Addition--}}
            <script type="text/javascript">
                // Reload Bolt checkout when price changes
                var config = { childList: true, subtree: true };
                var totalClassName = "cart-total-value cart-total-grandTotal";
                var totalPrice = "";
                var callback = function(mutationsList) {
                    var elms = document.getElementsByClassName(totalClassName);
                    if (elms.length == 0) {
                        return;
                    }
                    var newPrice = elms[0].innerHTML;
                    if (newPrice !== totalPrice && window.BoltCheckout) {
                        console.log("---- price updated. Reloading checkout...");
                        window.BoltCheckout.reloadBigCommerceCart();
                    }
                    totalPrice = newPrice;
                };
                new MutationObserver(callback).observe(document.body, config);
            </script>
            {{!--Bolt Addition End--}}
            {{#if cart.show_primary_checkout_button}}
                <div class="cart-actions">
                    <a class="button button--primary" href="{{urls.checkout.single_address}}" title="{{lang 'cart.checkout.title'}}">{{lang 'cart.checkout.button'}}</a>
                    {{!--Bolt Addition--}}
                    <div class="bolt-button-wrapper" style="display:none; width:100%">
                        <div class="bolt-checkout-button with-cards bolt-multi-step-checkout responsive" style="min-width:30%; float:right"></div>
                    </div>
                    {{!--Bolt Addition End--}}
                    {{#if cart.show_multiple_address_shipping}}
                        <a class="checkoutMultiple" href="{{urls.checkout.multiple_address}}">
                            {{lang 'cart.preview.checkout_multiple'}}
                        </a>
                    {{/if}}
                </div>
            {{else}}
                <div class="cart-actions">
                    <a class="button" href="{{urls.home}}" title="{{lang 'cart.continue_shopping'}}">{{lang 'cart.continue_shopping'}}</a>
                </div>
            {{/if}}

            {{#if cart.additional_checkout_buttons}}
                <div class="cart-additionalCheckoutButtons">
                    {{!--Bolt Addition--}}
                    <a href="{{urls.checkout.single_address}}" class="button klarna" style="display:none; margin-top:20px">
                        Pay With Klarna
                    </a>
                    {{!--Bolt Addition End--}}
                    {{#each cart.additional_checkout_buttons}}
                        {{{this}}}
                    {{/each}}
                </div>
            {{/if}}
        {{else}}
            <h3>{{lang 'cart.checkout.empty_cart'}}</h3>
        {{/if}}

        {{{snippet 'cart'}}}
    </main>
    {{!--Bolt Addition--}}
    <script type="text/javascript">
        var primaryButtons = document.querySelector(".cart-actions .button--primary");
        var boltButtons = document.getElementsByClassName("bolt-button-wrapper");
        var amazon = document.getElementsByClassName("CheckoutButtonAmazon")[0];
        var klarna = document.querySelector(".button.klarna");
        var additional = document.querySelector(".cart-additionalCheckoutButtons");
        if (true) {
            for (var i = 0; i < boltButtons.length; i++) {
                boltButtons[i].style.display = 'block';
            }
            primaryButtons.style.display = 'none';
            amazon.style['float'] = 'right';
            klarna.style.display = 'block';
            additional.style.display = 'grid';
            additional.style['justify-items'] = 'right';
            console.log("debug mode on. Show bolt button");
        }
    </script>
    {{!--Bolt Addition End--}}
</div>
{{/partial}}
{{> layout/base}}
